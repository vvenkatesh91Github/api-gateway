# ===============================
# Server
# ===============================
server.port=8080
spring.application.name=api-gateway
server.ssl.enabled=true
server.ssl.key-store=/Users/venkatesh.v/certs/localhost.p12
server.ssl.trust-store=/Library/Java/JavaVirtualMachines/amazon-corretto-21.jdk/Contents/Home/lib/security/cacerts
server.ssl.key-store-password=changeit
server.ssl.key-store-type=PKCS12

jwt.secret=my-super-secret-key-which-is-long-enough-256bits

# ===============================
# Spring Cloud Gateway Routes
# ===============================

# -------- AUTH SERVICE (NO JWT) --------
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=https://auth.localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/auth/**

# -------- USER SERVICE (JWT REQUIRED) --------
spring.cloud.gateway.routes[1].id=user-service
spring.cloud.gateway.routes[1].uri=https://users.localhost:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/users/**
spring.cloud.gateway.routes[1].filters[0]=JwtAuthFilter

# ===============================
# Global CORS Configuration
# ===============================
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=https://app.localhost:3000
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=Authorization,Content-Type,Cookie
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true



# ===============================
# Logging (Helpful during dev)
# ===============================
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.reactor.netty.http.client=DEBUG

